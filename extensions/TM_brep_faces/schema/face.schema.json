{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "face.schema.json",
  "title": "BREP Face",
  "type": "object",
  "required": ["type", "face_index", "u_bounds", "v_bounds"],
  "properties": {
    "type": {
      "type": "string",
      "enum": ["plane", "cylinder", "cone", "sphere", "torus"]
    },
    "face_index": {
      "type": "integer",
      "minimum": 0,
      "description": "Index of this face in the BREP model"
    },
    "u_bounds": {
      "$ref": "definitions.schema.json#/$defs/bounds",
      "description": "Parameter bounds in U direction"
    },
    "v_bounds": {
      "$ref": "definitions.schema.json#/$defs/bounds",
      "description": "Parameter bounds in V direction"
    }
  },
  "allOf": [
    {
      "if": {"properties": {"type": {"const": "plane"}}},
      "then": {
        "properties": {
          "origin": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "normal": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "x_dir": {"$ref": "definitions.schema.json#/$defs/vec3"}
        },
        "required": ["origin", "normal", "x_dir"]
      }
    },
    {
      "if": {"properties": {"type": {"const": "cylinder"}}},
      "then": {
        "properties": {
          "origin": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "axis": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "radius": {"type": "number", "exclusiveMinimum": 0}
        },
        "required": ["origin", "axis", "radius"]
      }
    },
    {
      "if": {"properties": {"type": {"const": "cone"}}},
      "then": {
        "properties": {
          "apex": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "axis": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "semi_angle": {"type": "number", "exclusiveMinimum": 0, "exclusiveMaximum": 1.5707963267948966},
          "ref_radius": {"type": "number", "minimum": 0}
        },
        "required": ["apex", "axis", "semi_angle", "ref_radius"]
      }
    },
    {
      "if": {"properties": {"type": {"const": "sphere"}}},
      "then": {
        "properties": {
          "center": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "radius": {"type": "number", "exclusiveMinimum": 0}
        },
        "required": ["center", "radius"]
      }
    },
    {
      "if": {"properties": {"type": {"const": "torus"}}},
      "then": {
        "properties": {
          "center": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "axis": {"$ref": "definitions.schema.json#/$defs/vec3"},
          "major_radius": {"type": "number", "exclusiveMinimum": 0},
          "minor_radius": {"type": "number", "exclusiveMinimum": 0}
        },
        "required": ["center", "axis", "major_radius", "minor_radius"]
      }
    }
  ]
}
